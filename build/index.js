(()=>{"use strict";const e=window.React,t=window.wp.hooks,n=window.wp.compose,l=window.wp.blockEditor,a=window.wp.element,i=window.wp.i18n,o=window.wp.components,r={tailwind:{label:"Tailwind Style",style:"solid",width:1,color:"#e5e7eb",opacity:1,lengthMode:"page",lengthPercent:100},modern:{label:"Modern Grid",style:"solid",width:1,color:"#3b82f6",opacity:.15,lengthMode:"page",lengthPercent:100},subtle:{label:"Subtle Lines",style:"dashed",width:1,color:"#000000",opacity:.05,lengthMode:"page",lengthPercent:100},custom:{label:"Custom",style:"solid",width:1,color:"#000000",opacity:.1,lengthMode:"page",lengthPercent:100}},s={enabled:!1,style:"solid",width:1,color:"#000000",opacity:.1,lengthMode:"page",lengthPercent:100},d={enabled:!1,preset:"custom",linked:!0,preventOverlap:!1,disableOnMobile:!0,topBottom:{...s},leftRight:{...s},top:{...s},right:{...s},bottom:{...s},left:{...s}},c=[{label:(0,i.__)("Solid","visual-grid"),value:"solid"},{label:(0,i.__)("Dashed","visual-grid"),value:"dashed"},{label:(0,i.__)("Dotted","visual-grid"),value:"dotted"}],g=[{label:(0,i.__)("Page Edge","visual-grid"),value:"page"},{label:(0,i.__)("Absolute %","visual-grid"),value:"absolute"},{label:(0,i.__)("Relative %","visual-grid"),value:"relative"}],p=[{label:(0,i.__)("Custom","visual-grid"),value:"custom"},{label:(0,i.__)("Tailwind Style","visual-grid"),value:"tailwind"},{label:(0,i.__)("Modern Grid","visual-grid"),value:"modern"},{label:(0,i.__)("Subtle Lines","visual-grid"),value:"subtle"}];function u({color:t,onChange:n}){const[l,i]=(0,a.useState)(!1);return(0,e.createElement)("div",{className:"visual-grid-color-picker"},(0,e.createElement)(o.Button,{onClick:()=>i(!l),className:"visual-grid-color-button",style:{backgroundColor:t,width:"36px",height:"36px",border:"1px solid #ccc",borderRadius:"4px"}}),l&&(0,e.createElement)(o.Popover,{position:"bottom center",onClose:()=>i(!1)},(0,e.createElement)("div",{style:{padding:"12px"}},(0,e.createElement)(o.ColorPicker,{color:t,onChange:n,enableAlpha:!1}))))}function h({label:t,config:n,onChange:l}){return(0,e.createElement)("div",{className:"visual-grid-side-controls"},(0,e.createElement)("h4",{style:{marginTop:"12px",marginBottom:"8px"}},t),(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Enable","visual-grid"),checked:n.enabled,onChange:e=>l({...n,enabled:e})}),n.enabled&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start",marginBottom:"12px"}},(0,e.createElement)(o.SelectControl,{label:(0,i.__)("Style","visual-grid"),value:n.style,options:c,onChange:e=>l({...n,style:e}),__nextHasNoMarginBottom:!0}),(0,e.createElement)(o.RangeControl,{label:(0,i.__)("Width","visual-grid"),value:n.width,onChange:e=>l({...n,width:e}),min:1,max:10,__nextHasNoMarginBottom:!0})),(0,e.createElement)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",marginBottom:"12px"}},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"}},(0,i.__)("Color","visual-grid")),(0,e.createElement)(u,{color:n.color,onChange:e=>l({...n,color:e})})),(0,e.createElement)(o.RangeControl,{label:(0,i.__)("Opacity","visual-grid"),value:n.opacity,onChange:e=>l({...n,opacity:e}),min:0,max:1,step:.05,__nextHasNoMarginBottom:!0})),(0,e.createElement)(o.SelectControl,{label:(0,i.__)("Length Mode","visual-grid"),value:n.lengthMode,options:g,onChange:e=>l({...n,lengthMode:e})}),"page"!==n.lengthMode&&(0,e.createElement)(o.RangeControl,{label:(0,i.__)("Length Percentage","visual-grid"),value:n.lengthPercent,onChange:e=>l({...n,lengthPercent:e}),min:1,max:200})))}function m({visualGrid:t,setAttributes:n}){const l=e=>{n({visualGrid:{...t,...e}})};return(0,e.createElement)(o.PanelBody,{title:(0,i.__)("Visual Grid","visual-grid"),initialOpen:!1,className:"visual-grid-panel"},(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Enable Visual Grid","visual-grid"),checked:t.enabled,onChange:e=>l({enabled:e})}),t.enabled&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.SelectControl,{label:(0,i.__)("Preset","visual-grid"),value:t.preset,options:p,onChange:e=>{const l=function(e,t){const n=r[e];if(!n||"custom"===e)return{...t,preset:e};const l={enabled:!0,style:n.style,width:n.width,color:n.color,opacity:n.opacity,lengthMode:n.lengthMode,lengthPercent:n.lengthPercent};return{...t,preset:e,topBottom:{...l},leftRight:{...l},top:{...l},right:{...l},bottom:{...l},left:{...l}}}(e,t);n({visualGrid:l})}}),(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Prevent Line Overlap","visual-grid"),help:(0,i.__)("Prevents duplicate lines from overlapping elements","visual-grid"),checked:t.preventOverlap,onChange:e=>l({preventOverlap:e})}),(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Disable on Mobile","visual-grid"),help:(0,i.__)("Hide grid lines on mobile devices (< 768px)","visual-grid"),checked:!1!==t.disableOnMobile,onChange:e=>l({disableOnMobile:e})}),(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)(o.Button,{variant:t.linked?"primary":"secondary",onClick:()=>l({linked:!t.linked}),style:{width:"100%"}},t.linked?(0,i.__)("ðŸ”— Sides Linked","visual-grid"):(0,i.__)("ðŸ”“ Sides Unlinked","visual-grid"))),t.linked?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(h,{label:(0,i.__)("Top & Bottom","visual-grid"),config:t.topBottom||s,onChange:e=>l({topBottom:e})}),(0,e.createElement)(h,{label:(0,i.__)("Left & Right","visual-grid"),config:t.leftRight||s,onChange:e=>l({leftRight:e})})):(0,e.createElement)(o.TabPanel,{className:"visual-grid-tabs",tabs:[{name:"top",title:(0,i.__)("Top","visual-grid")},{name:"right",title:(0,i.__)("Right","visual-grid")},{name:"bottom",title:(0,i.__)("Bottom","visual-grid")},{name:"left",title:(0,i.__)("Left","visual-grid")}]},n=>(0,e.createElement)(h,{label:n.title,config:t[n.name]||s,onChange:e=>l({[n.name]:e})}))))}function b(e,t){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?`rgba(${parseInt(n[1],16)}, ${parseInt(n[2],16)}, ${parseInt(n[3],16)}, ${t})`:`rgba(0, 0, 0, ${t})`}function v(e,t){switch(e.lengthMode){case"page":default:return"horizontal"===t?"100vw":"100vh";case"absolute":return"horizontal"===t?`${e.lengthPercent}vw`:`${e.lengthPercent}vh`;case"relative":return`${e.lengthPercent}%`}}function _(e,t,n){const l="horizontal"===n?"90deg":"180deg";switch(e){case"dashed":return`repeating-linear-gradient(${l}, ${t} 0px, ${t} 8px, transparent 8px, transparent 16px)`;case"dotted":return`repeating-linear-gradient(${l}, ${t} 0px, ${t} 2px, transparent 2px, transparent 6px)`;default:return t}}const f=["core/group","core/columns","core/column","core/cover","core/image","core/heading","core/paragraph","kadence/rowlayout","kadence/column","kadence/advancedheading","kadence/iconlist","kadence/tabs","kadence/accordion","simple-morph/glassmorphism-group"];(0,t.addFilter)("blocks.registerBlockType","visual-grid/add-attribute",function(e,t){return f.includes(t)?{...e,attributes:{...e.attributes,visualGrid:{type:"object",default:d}}}:e});const x=(0,n.createHigherOrderComponent)(t=>n=>{const{name:i,attributes:o,setAttributes:r,isSelected:s,clientId:c}=n;if(!f.includes(i))return(0,e.createElement)(t,{...n});const g=o.visualGrid||d,p=(0,a.useMemo)(()=>{if(!g.enabled)return"";let e=function(e){if(!e.enabled)return"";const t='[data-visual-grid-id="PLACEHOLDER"]';let n=`${t} { position: relative; overflow: visible; }\n`,l=null,a=null,i=null,o=null;if(e.linked?(e.topBottom?.enabled&&(l=e.topBottom,a=e.topBottom),e.leftRight?.enabled&&(i=e.leftRight,o=e.leftRight)):(e.top?.enabled&&(l=e.top),e.bottom?.enabled&&(a=e.bottom),e.left?.enabled&&(i=e.left),e.right?.enabled&&(o=e.right)),l){const e=b(l.color,l.opacity),a=v(l,"horizontal"),i=_(l.style,e,"horizontal");n+=`${t}::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: ${a};\n  height: ${l.width}px;\n  background: ${i};\n  pointer-events: none;\n  z-index: -1;\n}\n`}if(a){const e=b(a.color,a.opacity),l=v(a,"horizontal"),i=_(a.style,e,"horizontal");n+=`${t}::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: ${l};\n  height: ${a.width}px;\n  background: ${i};\n  pointer-events: none;\n  z-index: -1;\n}\n`}if(i||o){let e=[],l=[],a=[];if(i){const t=b(i.color,i.opacity),n=v(i,"vertical"),o=i.width;"solid"===i.style?e.push(`linear-gradient(180deg, ${t}, ${t})`):"dashed"===i.style?e.push(`repeating-linear-gradient(180deg, ${t} 0px, ${t} 8px, transparent 8px, transparent 16px)`):"dotted"===i.style&&e.push(`repeating-linear-gradient(180deg, ${t} 0px, ${t} 2px, transparent 2px, transparent 6px)`),l.push(`${o}px ${n}`),a.push("left center")}if(o){const t=b(o.color,o.opacity),n=v(o,"vertical"),i=o.width;"solid"===o.style?e.push(`linear-gradient(180deg, ${t}, ${t})`):"dashed"===o.style?e.push(`repeating-linear-gradient(180deg, ${t} 0px, ${t} 8px, transparent 8px, transparent 16px)`):"dotted"===o.style&&e.push(`repeating-linear-gradient(180deg, ${t} 0px, ${t} 2px, transparent 2px, transparent 6px)`),l.push(`${i}px ${n}`),a.push("right center")}e.length>0&&(n+=`${t} {\n  background-image: ${e.join(", ")};\n  background-size: ${l.join(", ")};\n  background-position: ${a.join(", ")};\n  background-repeat: no-repeat;\n}\n`)}return n}(g);return e.replace(/\[data-visual-grid-id="PLACEHOLDER"\]/g,`[data-block="${c}"]`)},[g,c]);return(0,e.createElement)(a.Fragment,null,(0,e.createElement)(t,{...n}),s&&(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(m,{visualGrid:g,setAttributes:r})),g.enabled&&p&&(0,e.createElement)("style",null,p))},"withVisualGridControls");(0,t.addFilter)("editor.BlockEdit","visual-grid/with-controls",x),(0,t.addFilter)("blocks.getSaveContent.extraProps","visual-grid/add-data-attributes",function(e,t,n){if(!f.includes(t.name))return e;const l=n.visualGrid;return l?.enabled?{...e,"data-visual-grid":JSON.stringify(l),className:`${e.className||""} has-visual-grid`.trim()}:e})})();